<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>zentao-api</title>
	<meta name="description" content="Documentation for zentao-api">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">zentao-api</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>zentao-api</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#zentao-api" id="zentao-api" style="color: inherit; text-decoration: none;">
					<h1><a href="https://github.com/catouse/zentao-api">zentao-api</a></h1>
				</a>
				<p>禅道 API 调用模块。</p>
				<a href="#使用方法" id="使用方法" style="color: inherit; text-decoration: none;">
					<h2>使用方法</h2>
				</a>
				<a href="#安装" id="安装" style="color: inherit; text-decoration: none;">
					<h3>安装</h3>
				</a>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> --</span><span style="color: #001080">save</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span><span style="color: #000000">-</span><span style="color: #001080">api</span>
</code></pre>
				<a href="#请求任何禅道-api" id="请求任何禅道-api" style="color: inherit; text-decoration: none;">
					<h3>请求任何禅道 API</h3>
				</a>
				<p>通过构建 <code>Zentao</code> API 调用实例，你可以使用链式方法 <code>zentao.m(moduleName).f(methodName)...get()</code> 来非常方便调用禅道任何 API。</p>
				<pre><code class="language-js"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Zentao</span><span style="color: #000000"> } </span><span style="color: #001080">form</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;zentao-api&#039;</span><span style="color: #000000">;</span>

<span style="color: #008000">// 创建一个禅道 API 调用对象</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span><span style="color: #000000"> = </span><span style="color: #001080">new</span><span style="color: #000000"> </span><span style="color: #001080">Zentao</span><span style="color: #000000">({</span>
<span style="color: #000000">      </span><span style="color: #001080">url</span><span style="color: #000000">: &#039;</span><span style="color: #001080">https</span><span style="color: #000000">:</span><span style="color: #008000">//demo.zentao.net/&#039;,</span>
<span style="color: #000000">      </span><span style="color: #001080">account</span><span style="color: #000000">: &#039;</span><span style="color: #001080">demo</span><span style="color: #000000">&#039;,</span>
<span style="color: #000000">    </span><span style="color: #001080">password</span><span style="color: #000000">: &#039;123456&#039;</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// 调用 product-all 获取所有产品信息</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">productAllResult</span><span style="color: #000000"> = </span><span style="color: #001080">await</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span>
<span style="color: #000000">      .</span><span style="color: #001080">m</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;product&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">      .</span><span style="color: #001080">f</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;all&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #001080">get</span><span style="color: #000000">();</span>

<span style="color: #008000">// 输出产品列表</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #001080">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;All products&#039;</span><span style="color: #000000">, </span><span style="color: #001080">productAllResult</span><span style="color: #000000">.</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #001080">products</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #008000">// 调用 product-view 获取产品详细信息</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">productViewResult</span><span style="color: #000000"> = </span><span style="color: #001080">await</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span>
<span style="color: #000000">        .</span><span style="color: #001080">m</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;product&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #001080">f</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;view&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #001080">withParams</span><span style="color: #000000">({</span><span style="color: #001080">productID</span><span style="color: #000000">: 1})</span>
<span style="color: #000000">    .</span><span style="color: #001080">get</span><span style="color: #000000">();</span>

<span style="color: #008000">// 输出产品信息</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #001080">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;All products&#039;</span><span style="color: #000000">, </span><span style="color: #001080">productViewResult</span><span style="color: #000000">.</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #001080">prodcut</span><span style="color: #000000">);</span>

<span style="color: #008000">// 调用 prodcut-add 添加新的产品到禅道</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">productCreateResult</span><span style="color: #000000"> = </span><span style="color: #001080">await</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span>
<span style="color: #000000">    .</span><span style="color: #001080">m</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;product&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #001080">f</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;create&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #001080">post</span><span style="color: #000000">({</span>
<span style="color: #000000">      </span><span style="color: #001080">name</span><span style="color: #000000">: &#039;</span><span style="color: #001080">New</span><span style="color: #000000"> </span><span style="color: #001080">product</span><span style="color: #000000">&#039;,</span>
<span style="color: #000000">      </span><span style="color: #001080">code</span><span style="color: #000000">: &#039;</span><span style="color: #001080">new_product_code</span><span style="color: #000000">&#039;</span>
<span style="color: #000000">    });</span>

<span style="color: #001080">if</span><span style="color: #000000"> (</span><span style="color: #001080">productCreateResult</span><span style="color: #000000">.</span><span style="color: #001080">status</span><span style="color: #000000">) {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #001080">log</span><span style="color: #000000">(&#039;&quot;</span><span style="color: #001080">New</span><span style="color: #000000"> </span><span style="color: #001080">product</span><span style="color: #000000">&quot; </span><span style="color: #001080">added</span><span style="color: #000000">.&#039;);</span>
<span style="color: #000000">}</span>
</code></pre>
				<p>你可以访问 <a href="https://github.com/catouse/zentao-api">https://github.com/catouse/zentao-api</a> 来查看所有可用 API 和详细示例。</p>
				<a href="#禅道-12-常用方法调用" id="禅道-12-常用方法调用" style="color: inherit; text-decoration: none;">
					<h3>禅道 12 常用方法调用</h3>
				</a>
				<p>针对禅道 12 版本，通过内置的 <code>Zentao12</code> 调用类可以直接调用一些常见方法：</p>
				<pre><code class="language-js"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Zentao12</span><span style="color: #000000"> } </span><span style="color: #001080">form</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;zentao-api&#039;</span><span style="color: #000000">;</span>

<span style="color: #008000">// 创建一个禅道12 API 调用对象</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span><span style="color: #000000"> = </span><span style="color: #001080">new</span><span style="color: #000000"> </span><span style="color: #001080">Zentao12</span><span style="color: #000000">({</span>
<span style="color: #000000">      </span><span style="color: #001080">url</span><span style="color: #000000">: &#039;</span><span style="color: #001080">https</span><span style="color: #000000">:</span><span style="color: #008000">//demo.zentao.net/&#039;,</span>
<span style="color: #000000">      </span><span style="color: #001080">account</span><span style="color: #000000">: &#039;</span><span style="color: #001080">demo</span><span style="color: #000000">&#039;,</span>
<span style="color: #000000">    </span><span style="color: #001080">password</span><span style="color: #000000">: &#039;123456&#039;</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// 调用 product-all 获取所有产品信息</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">productAllResult</span><span style="color: #000000"> = </span><span style="color: #001080">await</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span><span style="color: #000000">.</span><span style="color: #001080">getProductList</span><span style="color: #000000">();</span>
<span style="color: #008000">// 输出产品列表</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #001080">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;All products&#039;</span><span style="color: #000000">, </span><span style="color: #001080">productAllResult</span><span style="color: #000000">.</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #001080">products</span><span style="color: #000000">);</span>

<span style="color: #008000">// 调用 product-view 获取产品详细信息</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">productViewResult</span><span style="color: #000000"> = </span><span style="color: #001080">await</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span><span style="color: #000000">.</span><span style="color: #001080">getProduct</span><span style="color: #000000">({</span><span style="color: #001080">productID</span><span style="color: #000000">: 1})</span>
<span style="color: #008000">// 输出产品信息</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #001080">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;All products&#039;</span><span style="color: #000000">, </span><span style="color: #001080">productViewResult</span><span style="color: #000000">.</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #001080">prodcut</span><span style="color: #000000">);</span>

<span style="color: #008000">// 调用 prodcut-add 添加新的产品到禅道</span>
<span style="color: #001080">const</span><span style="color: #000000"> </span><span style="color: #001080">productCreateResult</span><span style="color: #000000"> = </span><span style="color: #001080">await</span><span style="color: #000000"> </span><span style="color: #001080">zentao</span><span style="color: #000000">.</span><span style="color: #001080">addProduct</span><span style="color: #000000">({</span>
<span style="color: #000000">    </span><span style="color: #001080">name</span><span style="color: #000000">: &#039;</span><span style="color: #001080">New</span><span style="color: #000000"> </span><span style="color: #001080">product</span><span style="color: #000000">&#039;,</span>
<span style="color: #000000">    </span><span style="color: #001080">code</span><span style="color: #000000">: &#039;</span><span style="color: #001080">new_product_code</span><span style="color: #000000">&#039;</span>
<span style="color: #000000">});</span>
<span style="color: #001080">if</span><span style="color: #000000"> (</span><span style="color: #001080">productCreateResult</span><span style="color: #000000">.</span><span style="color: #001080">status</span><span style="color: #000000">) {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #001080">log</span><span style="color: #000000">(&#039;&quot;</span><span style="color: #001080">New</span><span style="color: #000000"> </span><span style="color: #001080">product</span><span style="color: #000000">&quot; </span><span style="color: #001080">added</span><span style="color: #000000">.&#039;);</span>
<span style="color: #000000">}</span>
</code></pre>
				<p> <code>Zentao12</code> 实例上所有可用的方法包括：</p>
				<ul>
					<li>addBug</li>
					<li>addDept</li>
					<li>addProduct</li>
					<li>addProject</li>
					<li>addTask</li>
					<li>addUser</li>
					<li>finishTask</li>
					<li>getBug</li>
					<li>getBugCreateParams</li>
					<li>getBugList</li>
					<li>getBugResolveParams</li>
					<li>getDeptList</li>
					<li>getProduct</li>
					<li>getProductCreateParams</li>
					<li>getProductList</li>
					<li>getProject</li>
					<li>getProjectCreateParams</li>
					<li>getProjectList</li>
					<li>getTask</li>
					<li>getTaskCreateParams</li>
					<li>getTaskFinishParams</li>
					<li>getTaskList</li>
					<li>getUserCreateParams</li>
					<li>getUserList</li>
					<li>resolveBug</li>
				</ul>
				<p> <code>Zentao12</code> 继承自 <code>Zentao</code>，所以你仍然可以在 <code>Zentao12</code> 上调用 <code>zentao.m().f()...get()</code> 链式方法来请求禅道提供的任何 API。</p>
				<a href="#开发" id="开发" style="color: inherit; text-decoration: none;">
					<h2>开发</h2>
				</a>
				<p>该项目框架基于 <a href="https://tsdx.io/"><code>TSdx</code></a>，完全使用 <a href="https://www.typescriptlang.org/">TypeScript</a> 开发。</p>
				<p>如果希望参与本项目开发，可以先了解以下内容。</p>
				<a href="#启动开发模式" id="启动开发模式" style="color: inherit; text-decoration: none;">
					<h3>启动开发模式</h3>
				</a>
				<p>在开发目录执行 <code>npm install</code> 来安装依赖，然后执行如下命令启动开发模式：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">start</span>
</code></pre>
				<p>该命令会立即编译项目，并且在 /dist 目录生成编译后的文件，编译完成后改命令并不会退出，而是持续监听 <code>src/</code> 目录下的文件变更，并适时自动重新编译。</p>
				<a href="#构建" id="构建" style="color: inherit; text-decoration: none;">
					<h3>构建</h3>
				</a>
				<p>如果仅仅需要一次构建编译，只需要执行：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">build</span>
</code></pre>
				<a href="#测试" id="测试" style="color: inherit; text-decoration: none;">
					<h3>测试</h3>
				</a>
				<p>该项目使用 <code>jest</code> 进行测试，执行如下命令即可：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">test</span>
</code></pre>
				<a href="#生成-api-文档" id="生成-api-文档" style="color: inherit; text-decoration: none;">
					<h3>生成 API 文档</h3>
				</a>
				<p>该项目使用 <a href="https://typedoc.org/">TypeDoc</a> 来根据源码中的注视自动生成 API 文档，只需要执行如下命令：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">run</span><span style="color: #000000"> </span><span style="color: #001080">doc</span>
</code></pre>
				<a href="#包大小分析" id="包大小分析" style="color: inherit; text-decoration: none;">
					<h3>包大小分析</h3>
				</a>
				<p>该项目使用 <a href="https://github.com/ai/size-limit"><code>size-limit</code></a> 来帮助分析包大小，只需要执行如下命令：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">run</span><span style="color: #000000"> </span><span style="color: #001080">size</span>
</code></pre>
				<p>如果需要通过可视化报告分析包大小，只需要执行：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">run</span><span style="color: #000000"> </span><span style="color: #001080">analyze</span>
</code></pre>
				<a href="#代码检查" id="代码检查" style="color: inherit; text-decoration: none;">
					<h3>代码检查</h3>
				</a>
				<p>执行：</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">run</span><span style="color: #000000"> </span><span style="color: #001080">lint</span>
</code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/index.html">index</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/types.html">types</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/utils.html">utils</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/zentao.html">zentao</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/zentao_config.html">zentao-<wbr>config</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/zentao_request_builder.html">zentao-<wbr>request-<wbr>builder</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/zentao12.html">zentao12</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>